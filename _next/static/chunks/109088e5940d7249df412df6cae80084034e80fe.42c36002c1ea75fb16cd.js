(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[12],{"/iCK":function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"d",(function(){return l})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return b}));var r=n("rePB"),o=n("o0o1"),a=n.n(o),i=n("HaE+"),c=n("D5mc");function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f={key:"notifications",disabledAt:0,dismissedAt:0,endpointSentToServer:null},p=function(){var e=Object(i.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.b)();case 2:return t=e.sent,e.next=5,t.get("main","notifications");case 5:if(n=e.sent){e.next=8;break}return e.abrupt("return",f);case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p();case 2:return n=e.sent,e.next=5,Object(c.b)();case 5:return r=e.sent,e.next=8,r.put("main",s(s({},n),{},{key:"notifications"},t));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){return l({dismissedAt:Date.now()})},b=function(){return l({dismissedAt:0})}},"/m1d":function(e,t,n){"use strict";n.d(t,"c",(function(){return v})),n.d(t,"d",(function(){return h})),n.d(t,"b",(function(){return O})),n.d(t,"a",(function(){return j}));var r=n("o0o1"),o=n.n(r),a=n("HaE+"),i=n("/iCK"),c=n("I79Z"),u=n("gaKS"),s=Object(u.a)();function f(e){return p.apply(this,arguments)}function p(){return(p=Object(a.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"\n    mutation registerPushToken($webToken: WebPushSubscriptionInput, $token: TrimmedString) {\n      registerPushToken(webToken: $webToken, token: $token)\n    }\n  ",e.next=3,s.mutation("\n    mutation registerPushToken($webToken: WebPushSubscriptionInput, $token: TrimmedString) {\n      registerPushToken(webToken: $webToken, token: $token)\n    }\n  ",t).toPromise();case 3:if(n=e.sent,!(r=n.error)){e.next=7;break}throw r;case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(){return d.apply(this,arguments)}function d(){return(d=Object(a.a)(o.a.mark((function e(){var t,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"\n    mutation updateAccountSession($accountSession: UpdateAccountSessionInput!) {\n      updateAccountSession(accountSession: $accountSession) {\n        pushEnabled\n      }\n    }\n  ",t={accountSession:{pushEnabled:!1}},e.next=4,s.mutation("\n    mutation updateAccountSession($accountSession: UpdateAccountSessionInput!) {\n      updateAccountSession(accountSession: $accountSession) {\n        pushEnabled\n      }\n    }\n  ",t).toPromise();case 4:if(n=e.sent,!(r=n.error)){e.next=8;break}throw r;case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var b=Object(c.a)();function g(e){return y.apply(this,arguments)}function y(){return(y=Object(a.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i.a)();case 2:return n=e.sent,r=n.endpointSentToServer,e.abrupt("return",r===t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){return m.apply(this,arguments)}function m(){return(m=Object(a.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("granted"===b.getPermission()){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,b.getTokenKey();case 5:return t=e.sent,e.next=8,g(t);case 8:if(e.sent){e.next=20;break}return e.next=12,b.createToken();case 12:if(n=e.sent){e.next=15;break}return e.abrupt("return");case 15:return e.next=17,f(n.payload);case 17:return e.next=19,Object(i.d)({disabledAt:0,dismissedAt:0,endpointSentToServer:n.key});case 19:return e.abrupt("return",n);case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(){return w.apply(this,arguments)}function w(){return(w=Object(a.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i.d)({disabledAt:Date.now(),endpointSentToServer:null});case 2:return e.next=4,b.getTokenKey();case 4:if(t=e.sent,e.prev=5,!t){e.next=9;break}return e.next=9,l();case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(5),console.log("Error unsubscribing",e.t0);case 14:case"end":return e.stop()}}),e,null,[[5,11]])})))).apply(this,arguments)}var O=function(){var e=Object(a.a)(o.a.mark((function e(){var t,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i.a)();case 2:return t=e.sent,n=t.dismissedAt,r=t.disabledAt,864e5,e.abrupt("return",Date.now()-n<864e5||!!r);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function j(){return x.apply(this,arguments)}function x(){return(x=Object(a.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("granted"===b.getPermission()){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,O();case 5:if(!e.sent){e.next=8;break}return e.abrupt("return",!1);case 8:return e.next=10,b.getTokenKey();case 10:return t=e.sent,e.next=13,g(t);case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},"1gqn":function(e,t){e.exports=function(e){return e&&"object"===typeof e&&"function"===typeof e.copy&&"function"===typeof e.fill&&"function"===typeof e.readUInt8}},"9lTW":function(e,t,n){"use strict";(function(t){var r=n("Qetd");function o(e,t){if(e===t)return 0;for(var n=e.length,r=t.length,o=0,a=Math.min(n,r);o<a;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0}function a(e){return t.Buffer&&"function"===typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}var i=n("MCLT"),c=Object.prototype.hasOwnProperty,u=Array.prototype.slice,s="foo"===function(){}.name;function f(e){return Object.prototype.toString.call(e)}function p(e){return!a(e)&&("function"===typeof t.ArrayBuffer&&("function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}var l=e.exports=m,d=/\s*function\s+([^\(\s]*)\s*/;function b(e){if(i.isFunction(e)){if(s)return e.name;var t=e.toString().match(d);return t&&t[1]}}function g(e,t){return"string"===typeof e?e.length<t?e:e.slice(0,t):e}function y(e){if(s||!i.isFunction(e))return i.inspect(e);var t=b(e);return"[Function"+(t?": "+t:"")+"]"}function v(e,t,n,r,o){throw new l.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:o})}function m(e,t){e||v(e,!0,t,"==",l.ok)}function h(e,t,n,r){if(e===t)return!0;if(a(e)&&a(t))return 0===o(e,t);if(i.isDate(e)&&i.isDate(t))return e.getTime()===t.getTime();if(i.isRegExp(e)&&i.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"===typeof e||null!==t&&"object"===typeof t){if(p(e)&&p(t)&&f(e)===f(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===o(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(a(e)!==a(t))return!1;var c=(r=r||{actual:[],expected:[]}).actual.indexOf(e);return-1!==c&&c===r.expected.indexOf(t)||(r.actual.push(e),r.expected.push(t),function(e,t,n,r){if(null===e||void 0===e||null===t||void 0===t)return!1;if(i.isPrimitive(e)||i.isPrimitive(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var o=w(e),a=w(t);if(o&&!a||!o&&a)return!1;if(o)return h(e=u.call(e),t=u.call(t),n);var c,s,f=x(e),p=x(t);if(f.length!==p.length)return!1;for(f.sort(),p.sort(),s=f.length-1;s>=0;s--)if(f[s]!==p[s])return!1;for(s=f.length-1;s>=0;s--)if(!h(e[c=f[s]],t[c],n,r))return!1;return!0}(e,t,n,r))}return n?e===t:e==t}function w(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function O(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(n){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function j(e,t,n,r){var o;if("function"!==typeof t)throw new TypeError('"block" argument must be a function');"string"===typeof n&&(r=n,n=null),o=function(e){var t;try{e()}catch(n){t=n}return t}(t),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!o&&v(o,n,"Missing expected exception"+r);var a="string"===typeof r,c=!e&&o&&!n;if((!e&&i.isError(o)&&a&&O(o,n)||c)&&v(o,n,"Got unwanted exception"+r),e&&o&&n&&!O(o,n)||!e&&o)throw o}l.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=function(e){return g(y(e.actual),128)+" "+e.operator+" "+g(y(e.expected),128)}(this),this.generatedMessage=!0);var t=e.stackStartFunction||v;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var r=n.stack,o=b(t),a=r.indexOf("\n"+o);if(a>=0){var i=r.indexOf("\n",a+1);r=r.substring(i+1)}this.stack=r}}},i.inherits(l.AssertionError,Error),l.fail=v,l.ok=m,l.equal=function(e,t,n){e!=t&&v(e,t,n,"==",l.equal)},l.notEqual=function(e,t,n){e==t&&v(e,t,n,"!=",l.notEqual)},l.deepEqual=function(e,t,n){h(e,t,!1)||v(e,t,n,"deepEqual",l.deepEqual)},l.deepStrictEqual=function(e,t,n){h(e,t,!0)||v(e,t,n,"deepStrictEqual",l.deepStrictEqual)},l.notDeepEqual=function(e,t,n){h(e,t,!1)&&v(e,t,n,"notDeepEqual",l.notDeepEqual)},l.notDeepStrictEqual=function e(t,n,r){h(t,n,!0)&&v(t,n,r,"notDeepStrictEqual",e)},l.strictEqual=function(e,t,n){e!==t&&v(e,t,n,"===",l.strictEqual)},l.notStrictEqual=function(e,t,n){e===t&&v(e,t,n,"!==",l.notStrictEqual)},l.throws=function(e,t,n){j(!0,e,t,n)},l.doesNotThrow=function(e,t,n){j(!1,e,t,n)},l.ifError=function(e){if(e)throw e},l.strict=r((function e(t,n){t||v(t,!0,n,"==",e)}),l,{equal:l.strictEqual,deepEqual:l.deepStrictEqual,notEqual:l.notStrictEqual,notDeepEqual:l.notDeepStrictEqual}),l.strict.strict=l.strict;var x=Object.keys||function(e){var t=[];for(var n in e)c.call(e,n)&&t.push(n);return t}}).call(this,n("yLpj"))},D5mc:function(e,t,n){"use strict";n.d(t,"b",(function(){return B})),n.d(t,"a",(function(){return z}));var r=n("KQm4"),o=n("o0o1"),a=n.n(o),i=n("HaE+"),c=n("gtzJ");let u,s;const f=new WeakMap,p=new WeakMap,l=new WeakMap,d=new WeakMap,b=new WeakMap;let g={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return p.get(e);if("objectStoreNames"===t)return e.objectStoreNames||l.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return m(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function y(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(s||(s=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(h(this),t),m(f.get(this))}:function(...t){return m(e.apply(h(this),t))}:function(t,...n){const r=e.call(h(this),t,...n);return l.set(r,t.sort?t.sort():[t]),m(r)}}function v(e){return"function"===typeof e?y(e):(e instanceof IDBTransaction&&function(e){if(p.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",a),e.removeEventListener("abort",a)},o=()=>{t(),r()},a=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",o),e.addEventListener("error",a),e.addEventListener("abort",a)}));p.set(e,t)}(e),t=e,(u||(u=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,g):e);var t}function m(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",o),e.removeEventListener("error",a)},o=()=>{t(m(e.result)),r()},a=()=>{n(e.error),r()};e.addEventListener("success",o),e.addEventListener("error",a)}));return t.then((t=>{t instanceof IDBCursor&&f.set(t,e)})).catch((()=>{})),b.set(t,e),t}(e);if(d.has(e))return d.get(e);const t=v(e);return t!==e&&(d.set(e,t),b.set(t,e)),t}const h=e=>b.get(e);function w(e,t,{blocked:n,upgrade:r,blocking:o,terminated:a}={}){const i=indexedDB.open(e,t),c=m(i);return r&&i.addEventListener("upgradeneeded",(e=>{r(m(i.result),e.oldVersion,e.newVersion,m(i.transaction))})),n&&i.addEventListener("blocked",(()=>n())),c.then((e=>{a&&e.addEventListener("close",(()=>a())),o&&e.addEventListener("versionchange",(()=>o()))})).catch((()=>{})),c}const O=["get","getKey","getAll","getAllKeys","count"],j=["put","add","delete","clear"],x=new Map;function k(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(x.get(t))return x.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,o=j.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!o&&!O.includes(n))return;const a=async function(e,...t){const a=this.transaction(e,o?"readwrite":"readonly");let i=a.store;r&&(i=i.index(t.shift()));const c=await i[n](...t);return o&&await a.done,c};return x.set(t,a),a}g=(e=>({...e,get:(t,n,r)=>k(t,n)||e.get(t,n,r),has:(t,n)=>!!k(t,n)||e.has(t,n)}))(g);var S,P=function(){if(!(!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent))||!indexedDB.databases)return Promise.resolve();let e;return new Promise((t=>{const n=()=>indexedDB.databases().finally(t);e=setInterval(n,100),n()})).finally((()=>clearInterval(e)))},E=n("pn8F"),D=n("XtMp"),I=n("cuzS"),T=Object(E.a)(),A=function(){return!Object(D.a)()},B=function(){return T.promise};A()&&(window.dbReady=T);var N="onin",q=function(){var e=Object(i.a)(a.a.mark((function e(t,n,r,o){var i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n!==r&&console.log("IDB:oldVersion",n,"newVersion",r),i=function(e){return Promise.all(e.map((function(e){return o.objectStore(e).clear()})))},n<3&&(t.createObjectStore("account",{keyPath:"email",autoIncrement:!1}),t.createObjectStore("profiles",{keyPath:"email",autoIncrement:!1}),t.createObjectStore("groups",{keyPath:"id",autoIncrement:!1}),t.createObjectStore("latest-event-messages",{keyPath:"eventInstanceID",autoIncrement:!1}),t.createObjectStore("messages",{keyPath:"id",autoIncrement:!1}).createIndex("groupID__sentAt","groupID__sentAt")),n<4&&t.createObjectStore("main",{keyPath:"key",autoIncrement:!1}),n<5&&t.createObjectStore("latest-event-message-ids",{keyPath:"eventInstanceID",autoIncrement:!1}),n<10&&t.createObjectStore("store-persistance",{autoIncrement:!1}),!(n<11)){e.next=9;break}return e.next=9,i(["latest-event-messages","groups","main"]);case 9:if(!(n<12)){e.next=12;break}return e.next=12,i(["groups","main"]);case 12:n<13&&(t.deleteObjectStore("account",{keyPath:"email",autoIncrement:!1}),t.deleteObjectStore("profiles",{keyPath:"email",autoIncrement:!1}),t.createObjectStore("account",{keyPath:"accountID",autoIncrement:!1}),t.createObjectStore("profiles",{keyPath:"accountID",autoIncrement:!1}));case 13:case"end":return e.stop()}}),e)})));return function(t,n,r,o){return e.apply(this,arguments)}}();if(A())window.indexedDB;var M=function(){var e=Object(i.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!S){e.next=2;break}return e.abrupt("return",S);case 2:return e.prev=2,t="".concat(N,"-").concat(13),e.next=6,P();case 6:return e.next=8,Promise.all(Array.from({length:13}).map(function(){var e=Object(i.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,indexedDB.deleteDatabase("".concat(N,"-").concat(n));case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,n){return e.apply(this,arguments)}}()));case 8:return e.next=10,w(t,1,{upgrade:q,blocked:function(){return Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("IDB:blocked");case 1:case"end":return e.stop()}}),e)})))()},blocking:function(){return Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("IDB:blocking"),e.next=3,S.close();case 3:if(!Object(D.a)()||!self.skipWaiting){e.next=8;break}return e.next=6,self.skipWaiting();case 6:e.next=9;break;case 8:A()&&location.reload();case 9:case"end":return e.stop()}}),e)})))()},terminated:function(){console.log("IDB:terminated")}});case 10:return S=e.sent,A()&&(window.db=S),T.resolve(S),e.abrupt("return",S);case 16:return e.prev=16,e.t0=e.catch(2),T.reject(e.t0),A()&&alert("Error initializing IDB ".concat(e.t0.message)),c.d("Error initializing IDB",{extra:{error:e.t0}}),e.next=23,Object(I.a)();case 23:case"end":return e.stop()}}),e,null,[[2,16]])})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:if(e.prev=2,!window.db){e.next=6;break}return e.next=6,Promise.all(Object(r.a)(S.objectStoreNames).map((function(e){return S.clear(e)})));case 6:console.log("Database cleared"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.error("Unable to clear database",e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}();M()},I79Z:function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var r=n("o0o1"),o=n.n(r),a=n("HaE+"),i=n("sVgz"),c=n("UswH"),u=n("RP69"),s=n("XtMp"),f=n("FrBo"),p={getPermission:function(){return"granted"},requestPermission:function(){var e=Object(a.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return","granted");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getTokenKey:f.c,createToken:function(){var e=Object(a.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Object(f.c)()){e.next=3;break}return e.abrupt("return");case 3:return e.abrupt("return",{payload:{token:t},key:t});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},l=n("9lTW");n.n(l)()("BAXMuDr07_ruHKoUvIfwGlreVHEB0IqPtpmL-N7paKbR18bBHTL7jo1RhHT5GzesuwK7swlAeYb1gZ-dhg3pmds","Missing process.env.APP_WEB_PUSH_VAPID_PUBLIC_KEY");function d(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),n=window.atob(t),r=new Uint8Array(n.length),o=0;o<n.length;++o)r[o]=n.charCodeAt(o);return r}var b=function(){var e=Object(a.a)(o.a.mark((function e(){var t,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("serviceWorker"in navigator)||!("Notification"in window)){e.next=9;break}return e.next=3,null===(t=navigator.serviceWorker)||void 0===t?void 0:t.ready;case 3:if(!(n=e.sent)){e.next=9;break}return e.next=7,n.pushManager.getSubscription();case 7:return r=e.sent,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g={getPermission:function(){return Notification.permission},requestPermission:function(){if("Notification"in window)return Notification.requestPermission()},getTokenKey:function(){var e=Object(a.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b();case 2:return t=e.sent,e.abrupt("return",null===t||void 0===t?void 0:t.endpoint);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),createToken:function(){var e=Object(a.a)(o.a.mark((function e(){var t,n,r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("serviceWorker"in navigator)||!("Notification"in window)){e.next=10;break}return n=d("BAXMuDr07_ruHKoUvIfwGlreVHEB0IqPtpmL-N7paKbR18bBHTL7jo1RhHT5GzesuwK7swlAeYb1gZ-dhg3pmds"),e.next=4,null===(t=navigator.serviceWorker)||void 0===t?void 0:t.ready;case 4:if(!(r=e.sent)){e.next=10;break}return e.next=8,r.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:n});case 8:return a=e.sent,e.abrupt("return",{payload:{webToken:a},key:a.endpoint});case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},y="web.co.onin",v=function(){if("safari"in window){var e=window.safari.pushNotification.permission(y).deviceToken;return"safari#".concat(e)}},m={getPermission:function(){if("safari"in window)return window.safari.pushNotification.permission(y).permission},requestPermission:function(){var e=Object(a.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("safari"in window)){e.next=5;break}return e.next=3,new Promise((function(e){window.safari.pushNotification.requestPermission("https://onin.co/api/safari-push",y,{authenticationToken:"MpVH8alx4H1bnss21wKpXc6hKMOAZ3sz"},e)}));case 3:return t=e.sent,e.abrupt("return",t.permission);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),createToken:function(){var e=Object(a.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("safari"in window)){e.next=4;break}if(!(t=v())){e.next=4;break}return e.abrupt("return",{payload:{token:t},key:t});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getTokenKey:function(){var e=Object(a.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},h={name:"NullPushManager",getPermission:function(){return"granted"},requestPermission:function(){var e=Object(a.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return","granted");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getTokenKey:function(){},createToken:function(){}},w=function(){return Object(s.a)()?h:Object(c.a)()?p:Object(i.b)()?h:Object(u.a)()?m:"serviceWorker"in navigator&&"Notification"in window?g:h}},KKCa:function(e,t){"function"===typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},MCLT:function(e,t,n){(function(e){var r=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++)n[t[r]]=Object.getOwnPropertyDescriptor(e,t[r]);return n},o=/%[sdj%]/g;t.format=function(e){if(!v(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(c(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,a=r.length,i=String(e).replace(o,(function(e){if("%%"===e)return"%";if(n>=a)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return e}})),u=r[n];n<a;u=r[++n])g(u)||!w(u)?i+=" "+u:i+=" "+c(u);return i},t.deprecate=function(n,r){if("undefined"!==typeof e&&!0===e.noDeprecation)return n;if("undefined"===typeof e)return function(){return t.deprecate(n,r).apply(this,arguments)};var o=!1;return function(){if(!o){if(e.throwDeprecation)throw new Error(r);e.traceDeprecation?console.trace(r):console.error(r),o=!0}return n.apply(this,arguments)}};var a,i={};function c(e,n){var r={seen:[],stylize:s};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),b(n)?r.showHidden=n:n&&t._extend(r,n),m(r.showHidden)&&(r.showHidden=!1),m(r.depth)&&(r.depth=2),m(r.colors)&&(r.colors=!1),m(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=u),f(r,e,r.depth)}function u(e,t){var n=c.styles[t];return n?"\x1b["+c.colors[n][0]+"m"+e+"\x1b["+c.colors[n][1]+"m":e}function s(e,t){return e}function f(e,n,r){if(e.customInspect&&n&&x(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var o=n.inspect(r,e);return v(o)||(o=f(e,o,r)),o}var a=function(e,t){if(m(t))return e.stylize("undefined","undefined");if(v(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(y(t))return e.stylize(""+t,"number");if(b(t))return e.stylize(""+t,"boolean");if(g(t))return e.stylize("null","null")}(e,n);if(a)return a;var i=Object.keys(n),c=function(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}(i);if(e.showHidden&&(i=Object.getOwnPropertyNames(n)),j(n)&&(i.indexOf("message")>=0||i.indexOf("description")>=0))return p(n);if(0===i.length){if(x(n)){var u=n.name?": "+n.name:"";return e.stylize("[Function"+u+"]","special")}if(h(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(O(n))return e.stylize(Date.prototype.toString.call(n),"date");if(j(n))return p(n)}var s,w="",k=!1,S=["{","}"];(d(n)&&(k=!0,S=["[","]"]),x(n))&&(w=" [Function"+(n.name?": "+n.name:"")+"]");return h(n)&&(w=" "+RegExp.prototype.toString.call(n)),O(n)&&(w=" "+Date.prototype.toUTCString.call(n)),j(n)&&(w=" "+p(n)),0!==i.length||k&&0!=n.length?r<0?h(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),s=k?function(e,t,n,r,o){for(var a=[],i=0,c=t.length;i<c;++i)D(t,String(i))?a.push(l(e,t,n,r,String(i),!0)):a.push("");return o.forEach((function(o){o.match(/^\d+$/)||a.push(l(e,t,n,r,o,!0))})),a}(e,n,r,c,i):i.map((function(t){return l(e,n,r,c,t,k)})),e.seen.pop(),function(e,t,n){if(e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(s,w,S)):S[0]+w+S[1]}function p(e){return"["+Error.prototype.toString.call(e)+"]"}function l(e,t,n,r,o,a){var i,c,u;if((u=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]}).get?c=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(c=e.stylize("[Setter]","special")),D(r,o)||(i="["+o+"]"),c||(e.seen.indexOf(u.value)<0?(c=g(n)?f(e,u.value,null):f(e,u.value,n-1)).indexOf("\n")>-1&&(c=a?c.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+c.split("\n").map((function(e){return"   "+e})).join("\n")):c=e.stylize("[Circular]","special")),m(i)){if(a&&o.match(/^\d+$/))return c;(i=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(i=i.substr(1,i.length-2),i=e.stylize(i,"name")):(i=i.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),i=e.stylize(i,"string"))}return i+": "+c}function d(e){return Array.isArray(e)}function b(e){return"boolean"===typeof e}function g(e){return null===e}function y(e){return"number"===typeof e}function v(e){return"string"===typeof e}function m(e){return void 0===e}function h(e){return w(e)&&"[object RegExp]"===k(e)}function w(e){return"object"===typeof e&&null!==e}function O(e){return w(e)&&"[object Date]"===k(e)}function j(e){return w(e)&&("[object Error]"===k(e)||e instanceof Error)}function x(e){return"function"===typeof e}function k(e){return Object.prototype.toString.call(e)}function S(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(n){if(m(a)&&(a=e.env.NODE_DEBUG||""),n=n.toUpperCase(),!i[n])if(new RegExp("\\b"+n+"\\b","i").test(a)){var r=e.pid;i[n]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",n,r,e)}}else i[n]=function(){};return i[n]},t.inspect=c,c.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},c.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=d,t.isBoolean=b,t.isNull=g,t.isNullOrUndefined=function(e){return null==e},t.isNumber=y,t.isString=v,t.isSymbol=function(e){return"symbol"===typeof e},t.isUndefined=m,t.isRegExp=h,t.isObject=w,t.isDate=O,t.isError=j,t.isFunction=x,t.isPrimitive=function(e){return null===e||"boolean"===typeof e||"number"===typeof e||"string"===typeof e||"symbol"===typeof e||"undefined"===typeof e},t.isBuffer=n("1gqn");var P=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function E(){var e=new Date,t=[S(e.getHours()),S(e.getMinutes()),S(e.getSeconds())].join(":");return[e.getDate(),P[e.getMonth()],t].join(" ")}function D(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",E(),t.format.apply(t,arguments))},t.inherits=n("KKCa"),t._extend=function(e,t){if(!t||!w(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e};var I="undefined"!==typeof Symbol?Symbol("util.promisify.custom"):void 0;function T(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}t.promisify=function(e){if("function"!==typeof e)throw new TypeError('The "original" argument must be of type Function');if(I&&e[I]){var t;if("function"!==typeof(t=e[I]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,I,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,n,r=new Promise((function(e,r){t=e,n=r})),o=[],a=0;a<arguments.length;a++)o.push(arguments[a]);o.push((function(e,r){e?n(e):t(r)}));try{e.apply(this,o)}catch(i){n(i)}return r}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),I&&Object.defineProperty(t,I,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,r(e))},t.promisify.custom=I,t.callbackify=function(t){if("function"!==typeof t)throw new TypeError('The "original" argument must be of type Function');function n(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var o=n.pop();if("function"!==typeof o)throw new TypeError("The last argument must be of type Function");var a=this,i=function(){return o.apply(a,arguments)};t.apply(this,n).then((function(t){e.nextTick(i,null,t)}),(function(t){e.nextTick(T,t,i)}))}return Object.setPrototypeOf(n,Object.getPrototypeOf(t)),Object.defineProperties(n,r(t)),n}}).call(this,n("8oxB"))},MP59:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return s}));var r=n("rePB"),o=n("lLqN"),a=n.n(o),i=n("4dY6");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}a.a.init(e.env.MIXPANEL_TOKEN);var u={identify:function(e){null===a.a||void 0===a.a||a.a.identify(e)},reset:function(){try{null===a.a||void 0===a.a||a.a.reset()}catch(e){console.log("failed to reset mixpanel"),console.error(e)}},track:function(e,t){null===a.a||void 0===a.a||a.a.track(e,t)},people:{set:function(e){var t;e.mixpanelID&&u.identify(e.mixpanelID);var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);if(n.accountID&&(n.$email=n.accountID),n.name&&(n.$name=n.name),n.givenName&&(n.$first_name=n.givenName),n.familyName&&(n.$last_name=n.familyName),n.givenName||n.familyName){var o=[n.givenName,n.familyName].filter(Boolean).join(" ");n.$name=o}n.avatar&&(n.$avatar=Object(i.b)({filename:n.avatar,contentType:"image/jpg"},{crop:"fill",width:250,height:250,quality:100})),null===a.a||void 0===a.a||null===(t=a.a.people)||void 0===t||t.set(n)},increment:function(e){var t;null===a.a||void 0===a.a||null===(t=a.a.people)||void 0===t||t.increment(e)}}},s=u}).call(this,n("8oxB"))},RP69:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){var e=window.navigator.userAgent.toLowerCase();return e.includes("safari")&&!e.includes("chrome")}},cuzS:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var r=n("rePB"),o=n("o0o1"),a=n.n(o),i=n("HaE+"),c=n("gtzJ"),u=n("pw2c"),s=n("FrBo"),f=n("20a2"),p=n.n(f),l=n("Rsdc"),d=n("D5mc"),b=n("+GTU"),g=n("MP59"),y=n("esyF"),v=n("/m1d");function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w=function(){var e=Object(i.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.mutation("\n  mutation logoutAccount {\n    logoutAccount\n  }\n",{}).toPromise();case 2:t=e.sent,(n=t.errors)&&(console.log("logout:error",n),c.c(n,{extra:{errors:n}}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(i.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.serviceWorker.ready;case 3:if(null===(t=e.sent)||void 0===t||!t.pushManager){e.next=7;break}return e.next=7,Object(v.d)(t);case 7:e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Unable to unsubscribe",e.t0),c.c(e.t0,{extra:h({},e.t0)});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(i.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("logout"),e.next=3,Object(d.a)();case 3:console.log("Mixpanel.reset"),null===g.a||void 0===g.a||g.a.reset(),console.log("close websocket connection");try{null===l.b||void 0===l.b||l.b.close()}catch(n){console.log("could not close the connection")}return console.log("deregister push endpoint"),e.next=11,O();case 11:return console.log("logoutMutation"),e.next=14,w();case 14:t=Object(s.b)(),console.log("clearLocalStorage"),Object(u.a)(),Object(s.f)(t),console.log("resetState()"),Object(b.a)()&&window.actions&&window.actions.resetState&&window.actions.resetState(),y.a.sendToken("logout"),console.log("Router.push('/sign-up-and-login')"),p.a.push("/sign-up-and-login");case 23:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(b.a)()&&(window.logout=j)},pn8F:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){var e=function(){},t=function(){};return{promise:new Promise((function(n,r){e=function(e){return n(e)},t=function(e){return r(e)}})),resolve:e,reject:t}}}}]);